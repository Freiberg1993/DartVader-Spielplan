
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>DartVader Spielplan</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #2c3e50; }
        table { border-collapse: collapse; width: 100%; margin-bottom: 30px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f4f4f4; }
        .section { margin-top: 40px; }
        .match-row input { width: 80px; }
        button { padding: 10px 20px; margin-bottom: 20px; }
    </style>
</head>
<body>

<h1>DartVader Spielplan</h1>

<h2>Spielerstatistik</h2>
<table id="statsTable">
    <thead>
        <tr>
            <th>Spieler</th>
            <th>Spiele</th>
            <th>Siege</th>
            <th>Niederlagen</th>
        </tr>
    </thead>
    <tbody>
        <tr><td>MÃ¤tti</td><td>0</td><td>0</td><td>0</td></tr>
        <tr><td>Maverick</td><td>0</td><td>0</td><td>0</td></tr>
        <tr><td>Ede</td><td>0</td><td>0</td><td>0</td></tr>
        <tr><td>Elmi</td><td>0</td><td>0</td><td>0</td></tr>
        <tr><td>Iceman</td><td>0</td><td>0</td><td>0</td></tr>
    </tbody>
</table>

<button onclick="generateMatches()">ðŸ”€ ZufÃ¤llige Paarungen generieren</button>

<div class="section">
    <h2>Hinrunde</h2>
    <table id="hinrundeTable">
        <thead>
            <tr><th>#</th><th>Paarung</th><th>Ergebnis</th></tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<div class="section">
    <h2>RÃ¼ckrunde</h2>
    <table id="rueckrundeTable">
        <thead>
            <tr><th>#</th><th>Paarung</th><th>Ergebnis</th></tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
const players = ["MÃ¤tti", "Maverick", "Ede", "Elmi", "Iceman"];
let hinrundeMatches = [];

function generateMatches() {
    const matches = [];
    for (let i = 0; i < players.length; i++) {
        for (let j = i + 1; j < players.length; j++) {
            matches.push([players[i], players[j]]);
        }
    }

    // Shuffle matches for Hinrunde
    hinrundeMatches = matches.sort(() => Math.random() - 0.5);
    renderMatches();
    resetStats();
}

function renderMatches() {
    const hinTable = document.querySelector("#hinrundeTable tbody");
    const rueckTable = document.querySelector("#rueckrundeTable tbody");
    hinTable.innerHTML = "";
    rueckTable.innerHTML = "";

    hinrundeMatches.forEach((pair, index) => {
        const row = document.createElement("tr");
        row.className = "match-row";
        row.innerHTML = `<td>${index + 1}</td><td>${pair[0]} vs ${pair[1]}</td><td><input type="text" onchange="updateStats()"></td>`;
        hinTable.appendChild(row);

        const revRow = document.createElement("tr");
        revRow.className = "match-row";
        revRow.innerHTML = `<td>${index + 1}</td><td>${pair[1]} vs ${pair[0]}</td><td><input type="text" onchange="updateStats()"></td>`;
        rueckTable.appendChild(revRow);
    });
}

function resetStats() {
    const rows = document.querySelectorAll("#statsTable tbody tr");
    rows.forEach(row => {
        row.cells[1].textContent = "0";
        row.cells[2].textContent = "0";
        row.cells[3].textContent = "0";
    });
}

function updateStats() {
    resetStats();
    const allInputs = document.querySelectorAll(".match-row input");
    allInputs.forEach((input, idx) => {
        const value = input.value.trim();
        if (value.includes(":")) {
            const [score1, score2] = value.split(":").map(s => parseInt(s));
            if (!isNaN(score1) && !isNaN(score2)) {
                const isRueckrunde = idx >= hinrundeMatches.length;
                const matchIndex = idx % hinrundeMatches.length;
                const pair = hinrundeMatches[matchIndex];
                const p1 = isRueckrunde ? pair[1] : pair[0];
                const p2 = isRueckrunde ? pair[0] : pair[1];

                updatePlayerStats(p1, score1 > score2);
                updatePlayerStats(p2, score2 > score1);
            }
        }
    });
}

function updatePlayerStats(player, isWinner) {
    const rows = document.querySelectorAll("#statsTable tbody tr");
    rows.forEach(row => {
        if (row.cells[0].textContent === player) {
            row.cells[1].textContent = parseInt(row.cells[1].textContent) + 1;
            if (isWinner) {
                row.cells[2].textContent = parseInt(row.cells[2].textContent) + 1;
            } else {
                row.cells[3].textContent = parseInt(row.cells[3].textContent) + 1;
            }
        }
    });
}

// Initial load
generateMatches();
</script>

</body>
</html>
